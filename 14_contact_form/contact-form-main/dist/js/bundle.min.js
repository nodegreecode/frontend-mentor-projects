document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("form"),t=document.getElementById("first-name"),n=document.getElementById("last-name"),s=document.getElementById("email"),i=document.getElementsByName("query-type"),r=document.getElementById("message"),o=document.getElementById("consent"),m=document.getElementById("success-message"),d="REQUIRED_FIELD",l="INVALID_EMAIL",a="REQUIRED_QUERY_TYPE",c="REQUIRED_CONSENT",u={[d]:"This field is required",[l]:"Please enter a valid email address",[a]:"Please select a query type",[c]:"To submit this form, please consent to being contacted"};function f(e){const t=u[e.message],n=e.field.parentElement.closest("fieldset")??e.field.parentElement;n.classList.add("error"),n.querySelector("small").innerText=t,e.field.style.borderColor="red"}function E(e){(e.field.parentElement.closest("fieldset")??e.field.parentElement).classList.remove("error"),e.field.style.borderColor="hsl(186, 15%, 59%)"}const v={events:{},on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)},emmit(e,t){this.events[e]&&this.events[e].forEach((e=>e(t)))}};function g(e,t){return""==e.value.trim()?(v.emmit("validation-error",{field:e,message:t}),!1):(v.emmit("validation-success",{field:e}),!0)}function h(e){return/^[\w.-]+@[\w.-\.]+[a-zA-Z]{2,}$/.test(String(e).toLowerCase())}v.on("reset-form",(function(){setTimeout((()=>m.setAttribute("hidden","")),3e3)})),v.on("validation-error",f),v.on("validation-success",E),v.on("form-validation",(function(){e.reset(),m.removeAttribute("hidden")})),s.addEventListener("input",(function(){clearTimeout(this.timer),this.timer=setTimeout((()=>{return e=this.value,t=l,h(e)?E({field:s}):f({field:s,message:t});var e,t}),500)})),e.addEventListener("submit",(function(e){e.preventDefault();const m=g(t,d),l=g(n,d),u=g(s,d),f=(h=i,y=a,Array.from(h).some((e=>e.checked))?(E({field:h[0]}),!0):(v.emmit("validation-error",{field:h[0],message:y}),!1));var h,y;const I=g(r,d),p=function(e,t){return e.checked?(E({field:e}),!0):(v.emmit("validation-error",{field:e,message:t}),!1)}(o,c);m&&l&&u&&f&&I&&p&&v.emmit("form-validation"),v.emmit("reset-form")}))}));